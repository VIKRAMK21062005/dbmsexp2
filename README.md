# EXP No.5                                                                                                                                                      

## Date:


### AIM:

To Study & Implementation of Sub queries Views

### THEORY:

**SUBQUERIES:**

The query within another is known as a subquery. A statement containing a subquery is called a
parent statement. The rows returned by subquery are used by the parent statement or in other
words A subquery is a SELECT statement that is embedded in a clause of another SELECT
statement

**You can place the subquery in a number of SQL clauses:**

1) WHERE clause

2) HAVING clause

3) FROM clause

4) OPERATORS( IN.ANY,ALL,<,>,>=,<= etc..)

**Types:**

**1. Sub queries that return several values**

Sub queries can also return more than one value. Such results should be made use along with the
operators in and any.

**2. Multiple queries**

Here more than one subquery is used. These multiple sub queries are combined by means of
‘and’ & ‘or’ keywords.

**3. Correlated subquery**

A subquery is evaluated once for the entire parent statement whereas a correlated Sub query is
evaluated once per row processed by the parent statement.

**VIEW:**

In SQL, a view is a virtual table based on the result-set of an SQL statement. A view contains
rows and columns, just like a real table. The fields in a view are fields from one or more real
tables in the database. You can add SQL functions, WHERE, and JOIN statements to a view and
present the data as if the data were coming from one single table. A view is a virtual table, which
consists of a set of columns from one or more tables. It is similar to a table but it does not store
in the database. View is a query stored as an object.

**Syntax:**
```
CREATE VIEW
AS
SELECT FROM relation_name WHERE (Condition)
```
**DROPPING A VIEW:**

A view can be deleted with the DROP VIEW command.

**Syntax:**  
```DROP VIEW ;```

## 1.Write a SQL query to Retrieve the medications with dosages equal to the highest dosage.

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/7aef2a09-33b8-433c-89ba-c4ffc1fac49c)


  
  **ANSWER Query:**

 ```
SELECT *
FROM medications
WHERE dosage = (SELECT MAX(dosage) FROM medications); 
  ```


**OUTPUT:**

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/c4a1c517-1e00-4dac-a564-c781a4097aad)

## 2.Write a SQL query that retrieves the all the columns from the Table Grades, where the grade is equal to the minimum grade achieved in each subject.

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/669cca71-8f71-4502-b919-372d6f17f070)



  
  **ANSWER Query:**

 ```
SELECT *
FROM grades t1
WHERE grade = (
    SELECT Min(grade)
    FROM grades t2
    WHERE t2.subject = t1.subject
);
  ```


**OUTPUT:**

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/fc95aaf8-296c-46c6-a237-e7560dee6a28)


## 3.Write a SQL query to retrieve all columns from the CUSTOMERS table for customers whose Address as Delhi and age below 30

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/348169f2-d0de-4248-90ce-f7bfb59f0ba1)


  
  **ANSWER Query:**

 ```
SELECT * FROM CUSTOMERS
WHERE ID IN (SELECT ID FROM CUSTOMERSWHERE Address="Delhi" and age <30);
  ```


**OUTPUT:**

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/fd099ebc-f348-4e43-930c-0b108bb7ef54)


## 4.Write a SQL query to retrieve all columns from the CUSTOMERS table for customers whose AGE is LESS than $30

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/18693702-371d-4d84-a1ff-4d23aac40656)

  
  **ANSWER Query:**

 ```
SELECT * FROM CUSTOMERS WHERE ID IN (SELECT ID FROM CUSTOMERS WHERE AGE < 30);
  ```


**OUTPUT:**

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/5a4e9d66-a080-474e-83ea-092b9be7b334)


## 5.Write a SQL query that retrieves the names of students and their corresponding grades, where the grade is equal to the minimum grade achieved in each subject.

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/fd8938c9-8af4-48ad-ae7f-d242886a4249)



  
  **ANSWER Query:**

 ```
SELECT student_name, grade
FROM grades t1
WHERE grade = (
    SELECT MIN(grade)
    FROM grades t2
    WHERE t2.subject = t1.subject
);
  ```


**OUTPUT:**

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/de6d098e-50c1-49c8-b24f-18bb56aa2fbd)


## 6.From the following tables write a SQL query to find all orders generated by New York-based salespeople. Return ord_no, purch_amt, ord_date, customer_id, salesman_id.

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/7df64251-b70a-4c9c-a579-6d06b7c5c0e9)


  
  **ANSWER Query:**

 ```
SELECT *
FROM orders
WHERE salesman_id IN
    (SELECT salesman_id 
     FROM salesman 
     WHERE city='New York');
  ```


**OUTPUT:**

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/83fe64c7-332d-4392-ae51-2342befd666e)

## 7.Write a SQL query to Find employees who have an age less than the average age of employees with incomes over 1 million

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/48153e82-4c0c-46c3-bdc2-9727ddad7114)


  
  **ANSWER Query:**

 ```
SELECT *
FROM employee
WHERE age < (SELECT AVG(age) FROM employee WHERE income > 1000000);
  ```


**OUTPUT:**

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/e7033636-dfd6-4fa6-998c-639fb1ffdfb2)

## 8.From the following tables, write a SQL query to find all orders generated by the salespeople who may work for customers whose id is 3007. Return ord_no, purch_amt, ord_date, customer_id, salesman_id.

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/e097e58e-6409-4057-86ee-4394a804fe28)


  
  **ANSWER Query:**

 ```
SELECT *
FROM orders
WHERE salesman_id IN 
    (SELECT salesman_id 
     FROM orders 
     WHERE customer_id = 3007);
  ```


**OUTPUT:**

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/1212ce3f-d425-48f2-b9af-c559bbb176f7)


## 9.From the following tables, write a SQL query to find all the orders issued by the salesman 'Paul Adam'. Return ord_no, purch_amt, ord_date, customer_id and salesman_id.

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/00bb2819-fadd-423f-a46f-b4b1221379a7)


  
  **ANSWER Query:**

 ```
SELECT *
FROM orders
WHERE salesman_id =
    (SELECT salesman_id 
     FROM salesman 
     WHERE name='Paul Adam');
  ```


**OUTPUT:**

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/05dce0f5-9af4-4d5b-b626-7d4d323221e7)


## 10.From the following tables write a SQL query to find all orders generated by London-based salespeople. Return ord_no, purch_amt, ord_date, customer_id, salesman_id.

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/5616288a-1e08-4cfd-92ab-2d41355b41dc)


  
  **ANSWER Query:**

 ```
SELECT *
FROM orders
WHERE salesman_id IN
    (SELECT salesman_id 
     FROM salesman 
     WHERE city='London');
  ```


**OUTPUT:**

![image](https://github.com/LOKESHKUMARARI/dbmsexp5/assets/119406110/9546fa83-302b-4873-b851-26339f713197)


## Result:

Studying and Implementing  of Sub queries Views is done successfully.



